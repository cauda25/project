<!DOCTYPE html>
<html lang="en" layout:decorate="~{/layouts/layout}">
  <div layout:fragment="content">
    <section class="register-form spad">
      <div class="container">
        <div
          style="
            background: #1e1e2d; /* 어두운 배경 */
            border: 1px solid #444;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            max-width: 500px;
            margin: 0 auto;
            color: #fff; /* 글씨 색상 */
          "
        >
          <h3
            style="
              text-align: center;
              font-weight: bold;
              margin-bottom: 20px;
              color: #ff4c4c; /* 강조색 */
            "
          >
            회원가입
          </h3>
          <form
            th:action="@{/member/register}"
            method="post"
            th:object="${memberDto}"
            onsubmit="return validateForm()"
          >
            <!-- 아이디 -->
            <div class="form-group" style="margin-bottom: 15px">
              <label for="memberId" style="font-weight: bold">아이디</label>
              <input
                type="text"
                id="memberId"
                th:field="*{memberId}"
                placeholder="아이디 입력"
                style="background: #333; color: #fff; border: 1px solid #555"
                class="form-control"
                required
              />
              <span id="idError" style="color: red; font-size: 12px"></span>
            </div>

            <!-- 비밀번호 -->
            <div class="form-group" style="margin-bottom: 15px">
              <label for="password" style="font-weight: bold">비밀번호</label>
              <input
                type="password"
                id="password"
                th:field="*{password}"
                placeholder="비밀번호 입력"
                style="background: #333; color: #fff; border: 1px solid #555"
                class="form-control"
                required
              />
            </div>

            <!-- 비밀번호 재확인 -->
            <div class="form-group" style="margin-bottom: 15px">
              <label for="passwordCheck" style="font-weight: bold"
                >비밀번호 재확인</label
              >
              <input
                type="password"
                id="passwordCheck"
                placeholder="비밀번호 재입력"
                style="background: #333; color: #fff; border: 1px solid #555"
                class="form-control"
                required
              />
              <span
                id="passwordError"
                style="color: red; font-size: 12px"
              ></span>
            </div>

            <!-- 이메일 -->
            <div class="form-group" style="margin-bottom: 15px">
              <label for="email" style="font-weight: bold">이메일</label>
              <input
                type="email"
                id="email"
                th:field="*{email}"
                placeholder="이메일 입력"
                style="background: #333; color: #fff; border: 1px solid #555"
                class="form-control"
                required
              />
              <span id="emailError" style="color: red; font-size: 12px"></span>
            </div>

            <!-- 이름 -->
            <div class="form-group" style="margin-bottom: 15px">
              <label for="name" style="font-weight: bold">이름</label>
              <input
                type="text"
                id="name"
                th:field="*{name}"
                placeholder="이름 입력"
                style="background: #333; color: #fff; border: 1px solid #555"
                class="form-control"
                required
              />
            </div>

            <!-- 생년월일 -->
            <div class="form-group" style="margin-bottom: 15px">
              <label for="birth" style="font-weight: bold">생년월일</label>
              <input
                type="date"
                id="birth"
                th:field="*{birth}"
                style="background: #333; color: #fff; border: 1px solid #555"
                class="form-control"
                required
              />
            </div>

            <!-- 성별 -->
            <div class="form-group" style="margin-bottom: 15px">
              <label for="gender" style="font-weight: bold">성별</label>
              <select
                id="gender"
                th:field="*{gender}"
                style="background: #333; color: #fff; border: 1px solid #555"
                class="form-control"
                required
              >
                <option value="">성별 선택</option>
                <option value="남성">남성</option>
                <option value="여성">여성</option>
              </select>
            </div>

            <!-- 휴대전화 -->
            <div class="form-group" style="margin-bottom: 15px">
              <label for="phone" style="font-weight: bold">휴대전화</label>
              <input
                type="text"
                id="phone"
                th:field="*{phone}"
                placeholder="010-1234-5678 형식으로 입력"
                style="background: #333; color: #fff; border: 1px solid #555"
                class="form-control"
                oninput="formatPhoneNumber(this)"
                required
              />
            </div>
            <!-- 주소 -->
            <div class="form-group" style="margin-bottom: 15px">
              <label for="address" style="font-weight: bold">주소</label>
              <input
                type="text"
                id="address"
                th:field="*{address}"
                placeholder="주소 입력"
                style="background: #333; color: #fff; border: 1px solid #555"
                class="form-control"
                required
              />
            </div>

            <!-- 가입하기 버튼 -->
            <div style="text-align: center; margin-top: 20px">
              <button
                type="submit"
                style="
                  background-color: #ff4c4c;
                  color: #1e1e2d;
                  border: none;
                  padding: 10px 20px;
                  border-radius: 5px;
                  cursor: pointer;
                  font-weight: bold;
                "
              >
                가입하기
              </button>
            </div>
          </form>
        </div>
      </div>
    </section>
  </div>

  <th:block layout:fragment="js">
    <script>
      function formatPhoneNumber(input) {
        let value = input.value.replace(/[^0-9]/g, ""); // 숫자만 허용
        if (value.length > 3 && value.length <= 7) {
          input.value = `${value.slice(0, 3)}-${value.slice(3)}`;
        } else if (value.length > 7) {
          input.value = `${value.slice(0, 3)}-${value.slice(
            3,
            7
          )}-${value.slice(7, 11)}`;
        } else {
          input.value = value;
        }
      }

      function validateForm() {
        let password = document.getElementById("password").value;
        let passwordCheck = document.getElementById("passwordCheck").value;
        let errorSpan = document.getElementById("passwordError");

        if (password !== passwordCheck) {
          errorSpan.textContent = "비밀번호가 일치하지 않습니다.";
          return false;
        }
        errorSpan.textContent = "";
        return true;
      }
    </script>
  </th:block>
</html>
